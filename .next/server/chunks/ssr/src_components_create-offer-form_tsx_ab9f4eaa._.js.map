{"version":3,"sources":["../../../../src/components/create-offer-form.tsx","../../../../src/hooks/use-create-offer.ts","../../../../node_modules/.pnpm/%40solana%2Bspl-token%400.4.14_%40solana%2Bweb3.js%401.98.4_bufferutil%404.0.9_typescript%405.9.3_utf-8_fde2c4609453858c55ec40f34930ca21/node_modules/%40solana/spl-token/src/instructions/types.ts","../../../../node_modules/.pnpm/%40solana%2Bspl-token%400.4.14_%40solana%2Bweb3.js%401.98.4_bufferutil%404.0.9_typescript%405.9.3_utf-8_fde2c4609453858c55ec40f34930ca21/node_modules/%40solana/spl-token/src/instructions/syncNative.ts"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, CheckCircle, Coins } from \"lucide-react\";\nimport { useCreateOffer } from \"@/hooks/use-create-offer\";\nimport { useWalletAuth } from \"@/hooks/use-wallet-auth\";\nimport { AssetSelector, SelectedAsset } from \"@/components/asset-selector\";\nimport { toast } from \"sonner\";\nimport { toTokenAmount } from \"@/lib/token-utils\";\n\nexport function CreateOfferForm() {\n  const router = useRouter();\n  const { isConnected, isAuthenticated, openWalletModal } = useWalletAuth();\n  const { createOffer, isLoading } = useCreateOffer();\n\n  const [selectedAssetA, setSelectedAssetA] = useState<SelectedAsset | null>(null);\n  const [selectedAssetB, setSelectedAssetB] = useState<SelectedAsset | null>(null);\n  const [amountA, setAmountA] = useState(\"\");\n  const [amountB, setAmountB] = useState(\"\");\n  const [allowAlternatives, setAllowAlternatives] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    // Validate asset A selection\n    if (!selectedAssetA) {\n      newErrors.assetA = \"Please select an asset\";\n    }\n\n    // Validate asset B selection\n    if (!selectedAssetB) {\n      newErrors.assetB = \"Please select an asset\";\n    }\n\n    if (selectedAssetA && selectedAssetB && selectedAssetA.mint === selectedAssetB.mint) {\n      newErrors.assetB = \"Cannot swap the same asset\";\n    }\n\n    // Validate amounts for tokens (NFTs are always amount = 1)\n    if (selectedAssetA?.type === \"token\") {\n      const parsedAmountA = parseFloat(amountA);\n      if (!amountA || isNaN(parsedAmountA) || parsedAmountA <= 0) {\n        newErrors.amountA = \"Amount must be greater than 0\";\n      }\n\n      // Check balance for tokens\n      if (selectedAssetA.data && \"uiAmount\" in selectedAssetA.data) {\n        const availableBalance = parseFloat(selectedAssetA.data.uiAmount);\n        if (parsedAmountA > availableBalance) {\n          newErrors.amountA = `Insufficient balance (available: ${selectedAssetA.data.uiAmount})`;\n        }\n      }\n    }\n\n    if (selectedAssetB?.type === \"token\") {\n      const parsedAmountB = parseFloat(amountB);\n      if (!amountB || isNaN(parsedAmountB) || parsedAmountB <= 0) {\n        newErrors.amountB = \"Amount must be greater than 0\";\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!isConnected) {\n      openWalletModal();\n      return;\n    }\n\n    if (!isAuthenticated) {\n      toast.error(\"Please authenticate your wallet\");\n      return;\n    }\n\n    if (!validateForm()) {\n      toast.error(\"Please fix the form errors\");\n      return;\n    }\n\n    try {\n      // Convert amounts to smallest unit using actual decimals\n      const finalAmountA = selectedAssetA!.type === \"nft\" ? \"1\" : amountA;\n      const finalAmountB = selectedAssetB!.type === \"nft\" ? \"1\" : amountB;\n      \n      const decimalsA = selectedAssetA!.decimals || 0;\n      const decimalsB = selectedAssetB!.decimals || 0;\n      \n      const tokenAmountA = toTokenAmount(finalAmountA, decimalsA);\n      const tokenAmountB = toTokenAmount(finalAmountB, decimalsB);\n\n      const result = await createOffer({\n        tokenMintA: selectedAssetA!.mint,\n        tokenAmountA,\n        tokenMintB: selectedAssetB!.mint,\n        tokenAmountB,\n        allowAlternatives,\n      });\n\n      toast.success(\"Offer created successfully!\", {\n        description: `Transaction: ${result.signature.slice(0, 8)}...`,\n      });\n\n      router.push(\"/marketplace\");\n    } catch (err: any) {\n      console.error(\"Failed to create offer:\", err);\n      toast.error(\"Failed to create offer\", {\n        description: err.message || \"Please try again\",\n      });\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Create New Offer</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Asset A (Offering) */}\n              <div className=\"space-y-3\">\n                <label className=\"text-sm font-medium flex items-center gap-2\">\n                  <Coins className=\"h-4 w-4\" />\n                  You Offer (Asset A)\n                </label>\n                <div className=\"space-y-2\">\n                  <AssetSelector\n                    value={selectedAssetA || undefined}\n                    onChange={(asset) => {\n                      setSelectedAssetA(asset);\n                      // For NFTs, amount is always 1\n                      if (asset.type === \"nft\") {\n                        setAmountA(\"1\");\n                      }\n                      setErrors({ ...errors, assetA: \"\" });\n                    }}\n                    label=\"Select Asset to Offer\"\n                    excludeMint={selectedAssetB?.mint}\n                  />\n                  {errors.assetA && (\n                    <p className=\"text-xs text-red-500 mt-1\">{errors.assetA}</p>\n                  )}\n                  \n                  {/* Amount input for tokens only */}\n                  {selectedAssetA?.type === \"token\" && (\n                    <div>\n                      <Input\n                        type=\"number\"\n                        step=\"any\"\n                        placeholder=\"Amount (e.g., 10.5)\"\n                        value={amountA}\n                        onChange={(e) => {\n                          setAmountA(e.target.value);\n                          setErrors({ ...errors, amountA: \"\" });\n                        }}\n                        className={errors.amountA ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.amountA && (\n                        <p className=\"text-xs text-red-500 mt-1\">{errors.amountA}</p>\n                      )}\n                      {selectedAssetA.data && \"uiAmount\" in selectedAssetA.data && (\n                        <p className=\"text-xs text-muted-foreground mt-1\">\n                          Available: {selectedAssetA.data.uiAmount} {selectedAssetA.data.symbol}\n                        </p>\n                      )}\n                    </div>\n                  )}\n                  \n                  {selectedAssetA?.type === \"nft\" && (\n                    <p className=\"text-xs text-muted-foreground\">NFT swaps are always 1:1</p>\n                  )}\n                </div>\n              </div>\n\n              {/* Asset B (Requesting) */}\n              <div className=\"space-y-3\">\n                <label className=\"text-sm font-medium flex items-center gap-2\">\n                  <Coins className=\"h-4 w-4\" />\n                  You Request (Asset B)\n                </label>\n                <div className=\"space-y-2\">\n                  <AssetSelector\n                    value={selectedAssetB || undefined}\n                    onChange={(asset) => {\n                      setSelectedAssetB(asset);\n                      // For NFTs, amount is always 1\n                      if (asset.type === \"nft\") {\n                        setAmountB(\"1\");\n                      }\n                      setErrors({ ...errors, assetB: \"\" });\n                    }}\n                    label=\"Select Asset to Request\"\n                    excludeMint={selectedAssetA?.mint}\n                  />\n                  {errors.assetB && (\n                    <p className=\"text-xs text-red-500 mt-1\">{errors.assetB}</p>\n                  )}\n                  \n                  {/* Amount input for tokens only */}\n                  {selectedAssetB?.type === \"token\" && (\n                    <div>\n                      <Input\n                        type=\"number\"\n                        step=\"any\"\n                        placeholder=\"Amount (e.g., 100)\"\n                        value={amountB}\n                        onChange={(e) => {\n                          setAmountB(e.target.value);\n                          setErrors({ ...errors, amountB: \"\" });\n                        }}\n                        className={errors.amountB ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.amountB && (\n                        <p className=\"text-xs text-red-500 mt-1\">{errors.amountB}</p>\n                      )}\n                    </div>\n                  )}\n                  \n                  {selectedAssetB?.type === \"nft\" && (\n                    <p className=\"text-xs text-muted-foreground\">NFT swaps are always 1:1</p>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Alternative Proposals Option */}\n            <div className=\"flex items-start space-x-3 p-4 rounded-lg bg-muted/50\">\n              <input\n                type=\"checkbox\"\n                id=\"alternatives\"\n                checked={allowAlternatives}\n                onChange={(e) => setAllowAlternatives(e.target.checked)}\n                className=\"h-4 w-4 mt-0.5 rounded border-gray-300\"\n              />\n              <div className=\"flex-1\">\n                <label\n                  htmlFor=\"alternatives\"\n                  className=\"text-sm font-medium cursor-pointer\"\n                >\n                  Allow alternative proposals\n                </label>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Buyers can propose different tokens than what you requested\n                </p>\n              </div>\n            </div>\n\n            {/* Info Box */}\n            <div className=\"p-4 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900\">\n              <p className=\"text-sm text-blue-900 dark:text-blue-100\">\n                <CheckCircle className=\"h-4 w-4 inline mr-2\" />\n                Your offered tokens will be locked in a secure vault on-chain until the\n                offer is accepted or cancelled.\n              </p>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-4\">\n            <Button\n              variant=\"outline\"\n              type=\"button\"\n              onClick={() => router.back()}\n              disabled={isLoading}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading || !isConnected}>\n              {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              {!isConnected\n                ? \"Connect Wallet\"\n                : isLoading\n                ? \"Creating...\"\n                : \"Create Offer\"}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n\n","\"use client\";\n\nimport { useCallback, useState } from \"react\";\nimport { useWallet, useConnection } from \"@solana/wallet-adapter-react\";\nimport { PublicKey, SystemProgram, SYSVAR_RENT_PUBKEY, Transaction, TransactionInstruction } from \"@solana/web3.js\";\nimport { Program, AnchorProvider, BN } from \"@coral-xyz/anchor\";\nimport { TOKEN_PROGRAM_ID, getAssociatedTokenAddress, createSyncNativeInstruction, NATIVE_MINT } from \"@solana/spl-token\";\nimport { PROGRAM_ID, FAIR_SWAP_IDL } from \"@/lib/program-config\";\nimport { getOrCreateAssociatedTokenAccount, getTokenBalance } from \"@/lib/token-account-utils\";\n\nexport interface CreateOfferParams {\n  tokenMintA: string;\n  tokenAmountA: string;\n  tokenMintB: string;\n  tokenAmountB: string;\n  allowAlternatives: boolean;\n}\n\nexport function useCreateOffer() {\n  const { publicKey, signTransaction, signAllTransactions } = useWallet();\n  const { connection } = useConnection();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const createOffer = useCallback(\n    async (params: CreateOfferParams) => {\n      if (!publicKey || !signTransaction || !signAllTransactions) {\n        throw new Error(\"Wallet not connected\");\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        // Check if program exists on current network\n        const programInfo = await connection.getAccountInfo(PROGRAM_ID);\n        if (!programInfo) {\n          throw new Error(\n            `Program not found at ${PROGRAM_ID.toBase58()}. Make sure you're connected to the correct network (devnet/mainnet) and the program is deployed.`\n          );\n        }\n\n        // Setup provider and program\n        const provider = new AnchorProvider(\n          connection,\n          { publicKey, signTransaction, signAllTransactions },\n          { commitment: \"confirmed\" }\n        );\n        const program = new Program(FAIR_SWAP_IDL as any, provider);\n\n        // Generate unique offer ID (timestamp + random)\n        const offerId = new BN(Date.now() * 1000 + Math.floor(Math.random() * 1000));\n\n        // Convert addresses and amounts\n        const tokenMintA = new PublicKey(params.tokenMintA);\n        const tokenMintB = new PublicKey(params.tokenMintB);\n        const tokenAmountA = new BN(params.tokenAmountA);\n        const tokenAmountB = new BN(params.tokenAmountB);\n\n        // Derive PDA accounts\n        const [offerPda] = PublicKey.findProgramAddressSync(\n          [\n            Buffer.from(\"offer\"),\n            publicKey.toBuffer(),\n            offerId.toArrayLike(Buffer, \"le\", 8),\n          ],\n          PROGRAM_ID\n        );\n\n        const [vaultPda] = PublicKey.findProgramAddressSync(\n          [Buffer.from(\"vault\"), offerPda.toBuffer()],\n          PROGRAM_ID\n        );\n\n        // Check if token mint exists\n        const mintInfo = await connection.getAccountInfo(tokenMintA);\n        if (!mintInfo) {\n          throw new Error(\n            `Token mint ${tokenMintA.toBase58()} not found. Make sure this is a valid SPL token on the current network.`\n          );\n        }\n\n        // Get or create token account\n        const { address: sellerTokenAccount, instruction: createAtaIx, exists } = \n          await getOrCreateAssociatedTokenAccount(\n            connection,\n            tokenMintA,\n            publicKey,\n            publicKey\n          );\n\n        // Check token balance (handle native SOL vs SPL tokens)\n        const NATIVE_SOL_MINT = \"So11111111111111111111111111111111111111112\";\n        let balance: bigint;\n        \n        if (tokenMintA.toBase58() === NATIVE_SOL_MINT) {\n          // For native SOL, check wallet balance directly\n          const solBalance = await connection.getBalance(publicKey);\n          balance = BigInt(solBalance);\n        } else {\n          // For SPL tokens, check token account balance\n          balance = await getTokenBalance(connection, tokenMintA, publicKey);\n        }\n        \n        if (balance === BigInt(0)) {\n          throw new Error(\n            `You have 0 tokens in your account for ${tokenMintA.toBase58()}. Please add tokens to your wallet first.`\n          );\n        }\n        \n        // Convert BN to BigInt for comparison\n        const amountNeeded = BigInt(tokenAmountA.toString());\n        if (balance < amountNeeded) {\n          const readable = Number(balance) / 1e9;\n          const needed = Number(tokenAmountA.toString()) / 1e9;\n          throw new Error(\n            `Insufficient balance. You have ${readable.toFixed(4)} tokens but need ${needed.toFixed(4)}`\n          );\n        }\n\n        // Prepare pre-instructions for SOL wrapping if needed\n        const preInstructions: TransactionInstruction[] = [];\n        \n        // If token account doesn't exist, add instruction to create it\n        if (!exists && createAtaIx) {\n          preInstructions.push(createAtaIx);\n        }\n\n        // If offering native SOL, wrap it into wSOL token account\n        if (tokenMintA.toBase58() === NATIVE_SOL_MINT) {\n          // Transfer SOL to wSOL account\n          preInstructions.push(\n            SystemProgram.transfer({\n              fromPubkey: publicKey,\n              toPubkey: sellerTokenAccount,\n              lamports: Number(tokenAmountA.toString()),\n            })\n          );\n          \n          // Sync native (converts SOL to wSOL)\n          preInstructions.push(\n            createSyncNativeInstruction(sellerTokenAccount)\n          );\n        }\n\n        // Build transaction\n        const txBuilder = program.methods\n          .initializeOffer(\n            offerId,\n            tokenAmountA,\n            tokenMintB,\n            tokenAmountB,\n            params.allowAlternatives\n          )\n          .accounts({\n            offer: offerPda,\n            vault: vaultPda,\n            sellerTokenAccount,\n            tokenMintA,\n            seller: publicKey,\n            tokenProgram: TOKEN_PROGRAM_ID,\n            systemProgram: SystemProgram.programId,\n            rent: SYSVAR_RENT_PUBKEY,\n          });\n\n        // Add all pre-instructions if any\n        if (preInstructions.length > 0) {\n          txBuilder.preInstructions(preInstructions);\n        }\n\n        // Send transaction\n        const tx = await txBuilder.rpc();\n\n        // Wait for confirmation\n        await connection.confirmTransaction(tx, \"confirmed\");\n\n        setIsLoading(false);\n        return {\n          signature: tx,\n          offerId: offerId.toString(),\n          offerPda: offerPda.toBase58(),\n        };\n      } catch (err: any) {\n        console.error(\"Create offer error:\", err);\n        \n        // Parse Anchor/Solana errors for better messages\n        let errorMsg = err?.message || \"Failed to create offer\";\n        \n        if (errorMsg.includes(\"Simulation failed\")) {\n          errorMsg = \"Transaction simulation failed. This usually means:\\n\" +\n                     \"1. You don't have enough SOL for transaction fees\\n\" +\n                     \"2. The token account doesn't exist\\n\" +\n                     \"3. You don't have the tokens you're trying to send\\n\\n\" +\n                     \"Original error: \" + errorMsg;\n        } else if (errorMsg.includes(\"Transaction was not confirmed\")) {\n          errorMsg = \"Transaction timed out. The network may be congested. Please try again.\";\n        } else if (errorMsg.includes(\"User rejected\")) {\n          errorMsg = \"Transaction was cancelled.\";\n        }\n        \n        setError(errorMsg);\n        setIsLoading(false);\n        throw new Error(errorMsg);\n      }\n    },\n    [publicKey, signTransaction, signAllTransactions, connection]\n  );\n\n  return {\n    createOffer,\n    isLoading,\n    error,\n  };\n}\n","/** Instructions defined by the program */\nexport enum TokenInstruction {\n    InitializeMint = 0,\n    InitializeAccount = 1,\n    InitializeMultisig = 2,\n    Transfer = 3,\n    Approve = 4,\n    Revoke = 5,\n    SetAuthority = 6,\n    MintTo = 7,\n    Burn = 8,\n    CloseAccount = 9,\n    FreezeAccount = 10,\n    ThawAccount = 11,\n    TransferChecked = 12,\n    ApproveChecked = 13,\n    MintToChecked = 14,\n    BurnChecked = 15,\n    InitializeAccount2 = 16,\n    SyncNative = 17,\n    InitializeAccount3 = 18,\n    InitializeMultisig2 = 19,\n    InitializeMint2 = 20,\n    GetAccountDataSize = 21,\n    InitializeImmutableOwner = 22,\n    AmountToUiAmount = 23,\n    UiAmountToAmount = 24,\n    InitializeMintCloseAuthority = 25,\n    TransferFeeExtension = 26,\n    ConfidentialTransferExtension = 27,\n    DefaultAccountStateExtension = 28,\n    Reallocate = 29,\n    MemoTransferExtension = 30,\n    CreateNativeMint = 31,\n    InitializeNonTransferableMint = 32,\n    InterestBearingMintExtension = 33,\n    CpiGuardExtension = 34,\n    InitializePermanentDelegate = 35,\n    TransferHookExtension = 36,\n    // ConfidentialTransferFeeExtension = 37,\n    // WithdrawalExcessLamports = 38,\n    MetadataPointerExtension = 39,\n    GroupPointerExtension = 40,\n    GroupMemberPointerExtension = 41,\n    // ConfidentialMintBurnExtension = 42,\n    ScaledUiAmountExtension = 43,\n    PausableExtension = 44,\n}\n","import { struct, u8 } from '@solana/buffer-layout';\nimport type { AccountMeta, PublicKey } from '@solana/web3.js';\nimport { TransactionInstruction } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '../constants.js';\nimport {\n    TokenInvalidInstructionDataError,\n    TokenInvalidInstructionKeysError,\n    TokenInvalidInstructionProgramError,\n    TokenInvalidInstructionTypeError,\n} from '../errors.js';\nimport { TokenInstruction } from './types.js';\n\n/** TODO: docs */\nexport interface SyncNativeInstructionData {\n    instruction: TokenInstruction.SyncNative;\n}\n\n/** TODO: docs */\nexport const syncNativeInstructionData = struct<SyncNativeInstructionData>([u8('instruction')]);\n\n/**\n * Construct a SyncNative instruction\n *\n * @param account   Native account to sync lamports from\n * @param programId SPL Token program account\n *\n * @return Instruction to add to a transaction\n */\nexport function createSyncNativeInstruction(account: PublicKey, programId = TOKEN_PROGRAM_ID): TransactionInstruction {\n    const keys = [{ pubkey: account, isSigner: false, isWritable: true }];\n\n    const data = Buffer.alloc(syncNativeInstructionData.span);\n    syncNativeInstructionData.encode({ instruction: TokenInstruction.SyncNative }, data);\n\n    return new TransactionInstruction({ keys, programId, data });\n}\n\n/** A decoded, valid SyncNative instruction */\nexport interface DecodedSyncNativeInstruction {\n    programId: PublicKey;\n    keys: {\n        account: AccountMeta;\n    };\n    data: {\n        instruction: TokenInstruction.SyncNative;\n    };\n}\n\n/**\n * Decode a SyncNative instruction and validate it\n *\n * @param instruction Transaction instruction to decode\n * @param programId   SPL Token program account\n *\n * @return Decoded, valid instruction\n */\nexport function decodeSyncNativeInstruction(\n    instruction: TransactionInstruction,\n    programId = TOKEN_PROGRAM_ID,\n): DecodedSyncNativeInstruction {\n    if (!instruction.programId.equals(programId)) throw new TokenInvalidInstructionProgramError();\n    if (instruction.data.length !== syncNativeInstructionData.span) throw new TokenInvalidInstructionDataError();\n\n    const {\n        keys: { account },\n        data,\n    } = decodeSyncNativeInstructionUnchecked(instruction);\n    if (data.instruction !== TokenInstruction.SyncNative) throw new TokenInvalidInstructionTypeError();\n    if (!account) throw new TokenInvalidInstructionKeysError();\n\n    // TODO: key checks?\n\n    return {\n        programId,\n        keys: {\n            account,\n        },\n        data,\n    };\n}\n\n/** A decoded, non-validated SyncNative instruction */\nexport interface DecodedSyncNativeInstructionUnchecked {\n    programId: PublicKey;\n    keys: {\n        account: AccountMeta | undefined;\n    };\n    data: {\n        instruction: number;\n    };\n}\n\n/**\n * Decode a SyncNative instruction without validating it\n *\n * @param instruction Transaction instruction to decode\n *\n * @return Decoded, non-validated instruction\n */\nexport function decodeSyncNativeInstructionUnchecked({\n    programId,\n    keys: [account],\n    data,\n}: TransactionInstruction): DecodedSyncNativeInstructionUnchecked {\n    return {\n        programId,\n        keys: {\n            account,\n        },\n        data: syncNativeInstructionData.decode(data),\n    };\n}\n"],"names":[],"mappings":"2CECY,EAAA,YCEa,GHDzB,CE6CC,CF7CD,EAAA,CGA+B,AHA/B,CAAA,CGAiC,MHCjC,AGDuC,EHCvC,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,AGFwD,CHExD,AGFyD,CHEzD,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OCJA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,8BCJI,GCEG,ADHK,ECIR,CDJwB,CAAA,EAAA,EAAA,CAAA,CCIxB,CAAA,CD0CH,CC1CG,ODJwB,OCIxB,CAAA,EAAA,CAAA,iBDFA,CCOK,CAAA,CAAF,CAAE,CAAA,gBAAA,CAAA,EAAA,CAAA,oBDNL,CCaa,CAAA,EAAA,SAAA,SAAA,CAAA,EAAA,CAAA,qBDZb,CCaE,CAAA,EAAA,QAAA,CAAA,EAAA,CAAA,WDZF,CAAA,CAAA,EAAA,OAAA,CAAA,EAAA,CAAA,GAAA,MAAW,CAAA,AACX,CAAA,CAAA,EAAA,MAAA,CAAA,EAAA,CAAA,IAAA,IAAU,CAAA,AACV,CAAA,CAAA,EAAA,YAAA,CAAA,CAAA,CAAA,CAAA,cAAgB,CAChB,AADgB,CAChB,CAAA,EAAA,MAAA,CAAA,EAAA,CAAA,IAAA,IAAU,CAAA,AACV,CAAA,CAAA,EAAA,IAAA,CAAA,EAAA,CAAA,MAAA,AAAQ,CAAA,AACR,CAAA,CAAA,EAAA,YAAA,CAAA,CAAA,CAAA,CAAA,cAAgB,CAAA,AAChB,CAAA,CAAA,EAAA,aAAA,CAAA,GAAA,CAAA,eAAkB,CAAA,AAClB,CAAA,CAAA,EAAA,WAAA,CAAA,EAAA,CAAA,CAAA,aAAgB,CAAA,AAChB,CCcE,CAAA,EAAA,eAAA,CAAA,GAAA,CAAA,kLDTF,CAAA,CAAA,EAAA,UAAA,CAAA,GAAA,CAAA,YAAe,CAAA,AACf,CAAA,CAAA,EAAA,cAAA,IAAA,CAAA,GAAA,CAAA,oBAAuB,CAAA,AACvB,CAAA,CAAA,EAAA,cAAA,KAAA,CAAA,GAAA,CAAA,qBAAwB,CAAA,AACxB,CAAA,CAAA,EAAA,cAAA,CAAA,CAAA,GAAA,CAAA,iBAAoB,CAAA,AACpB,CAAA,CAAA,EAAA,cAAA,IAAA,CAAA,GAAA,CAAA,oBAAuB,CAAA,CACvB,CAAA,EAAA,cAAA,UAAA,CAAA,GAAA,CAAA,0BAA6B,CAAA,AAC7B,CAAA,CAAA,EAAA,cAAA,EAAA,CAAA,GAAA,CAAA,kBAAqB,CAAA,CACrB,CAAA,EAAA,cAAA,EAAA,CAAA,GAAA,CAAA,kBAAqB,CAAA,AACrB,CAAA,CAAA,EAAA,cAAA,cAAA,CAAA,GAAA,CAAA,8BAAiC,CAAA,0HAGjC,CAAA,CAAA,EAAA,4BAAA,CAAA,GAAA,CAAA,+DAEA,CAAA,CAAA,EAAA,qBAAA,CAAA,GAAA,CAAA,0IAGA,CAAA,CAAA,EAAA,4BAAA,CAAA,GAAA,CAAA,6EAEA,CAAA,CAAA,EAAA,2BAAA,CAAA,GAAA,CAAA,oFAIA,CAAA,CAAA,EAAA,wBAAA,CAAA,GAAA,CAAA,iFAEA,CAAA,CAAA,EAAA,2BAAA,CAAA,GAAA,CAAA,8BAEA,CCiCC,CAAA,EAAA,uBAAA,CAAA,GAAA,CAAA,0BDhCD,CAAA,CAAA,EAAA,cAAA,GAAA,CAAA,GAAA,CAAA,mBAAsB,CAAA,AC5BnB,IAAM,EAAA,CAAA,EAA4B,EAAA,MAAA,AAAM,EAA4B,IAAC,EAAA,EAAE,AAAF,EAAG,eAAe,CAAC,ADb/E,CCagF,AFXhG,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,ODCA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,IACd,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,aAAE,CAAW,CAAE,iBAAe,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,aAAA,AAAa,IACjE,CAAE,aAAW,WAAE,CAAS,CAAE,CAAG,ACC9B,SAAS,EACd,GAAM,WAAE,CAAS,iBAAE,CAAe,qBAAE,CAAmB,CAAE,CAAG,CAAA,EAAA,EAAA,SAAA,AAAS,IAC/D,CAAE,YAAU,CAAE,CAAG,CAAA,EAAA,EAAA,aAAA,AAAa,IAC9B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MA0LlD,MAAO,CACL,YAzLkB,CAAA,EAAA,EAAA,WAAW,AAAX,EAClB,MAAO,IACL,GAAI,CAAC,GAAa,CAAC,GAAmB,CAAC,EACrC,MAAM,AAAI,MAAM,OAD0C,iBAI5D,GAAa,GACb,EAAS,MAET,GAAI,KA4DE,EAzDJ,GAAI,CADgB,AACf,MADqB,EAAW,KACnB,SADiC,CAAC,EAAA,UAAU,EAE5D,MAAM,AAAI,MACR,CAAC,qBAAqB,EAAE,EAAA,UAAU,CAAC,QAAQ,GAAG,iGAAiG,CAAC,EAKpJ,IAAM,EAAW,IAAI,EAAA,cAAc,CACjC,EACA,WAAE,kBAAW,sBAAiB,CAAoB,EAClD,CAAE,WAAY,WAAY,GAEtB,EAAU,IAAI,EAAA,OAAO,CAAC,EAAA,aAAa,CAAS,GAG5C,EAAU,IAAI,EAAA,EAAE,CAAC,AAAa,SAAR,GAAG,GAAY,KAAK,KAAK,CAAiB,IAAhB,KAAK,MAAM,KAG3D,EAAa,IAAI,EAAA,SAAS,CAAC,EAAO,UAAU,EAC5C,EAAa,IAAI,EAAA,SAAS,CAAC,EAAO,UAAU,EAC5C,EAAe,IAAI,EAAA,EAAE,CAAC,EAAO,YAAY,EACzC,EAAe,IAAI,EAAA,EAAE,CAAC,EAAO,YAAY,EAGzC,CAAC,EAAS,CAAG,EAAA,SAAS,CAAC,sBAAsB,CACjD,CACE,OAAO,IAAI,CAAC,SACZ,EAAU,QAAQ,GAClB,EAAQ,WAAW,CAAC,OAAQ,KAAM,GACnC,CACD,EAAA,UAAU,EAGN,CAAC,EAAS,CAAG,EAAA,SAAS,CAAC,sBAAsB,CACjD,CAAC,OAAO,IAAI,CAAC,SAAU,EAAS,QAAQ,GAAG,CAC3C,EAAA,UAAU,EAKZ,GAAI,CADa,AACZ,MADkB,EAAW,EACnB,YADiC,CAAC,GAE/C,MAAM,AAAI,MACR,CAAC,WAAW,EAAE,EAAW,QAAQ,GAAG,uEAAuE,CAAC,EAKhH,GAAM,CAAE,QAAS,CAAkB,CAAE,YAAa,CAAW,CAAE,QAAM,CAAE,CACrE,MAAM,CAAA,EAAA,EAAA,iCAAA,AAAiC,EACrC,EACA,EACA,EACA,GAIE,EAAkB,8CAGxB,GAAI,EAAW,QAAQ,KAAO,EAAiB,CAE7C,IAAM,EAAa,MAAM,EAAW,UAAU,CAAC,GAC/C,EAAU,OAAO,EACnB,MAEE,CAFK,CAEK,MAAM,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,EAAY,EAAY,GAG1D,GAAI,IAAY,OAAO,GACrB,CADyB,KACf,AAAJ,MACJ,CAAC,sCAAsC,EAAE,EAAW,QAAQ,GAAG,yCAAyC,CAAC,EAK7G,IAAM,EAAe,OAAO,EAAa,QAAQ,IACjD,GAAI,EAAU,EAAc,CAC1B,IAAM,EAAW,OAAO,GAAW,IAC7B,EAAS,OAAO,EAAa,QAAQ,IAAM,GACjD,OAAM,AAAI,MACR,CAAC,+BAA+B,EAAE,EAAS,OAAO,CAAC,GAAG,iBAAiB,EAAE,EAAO,OAAO,CAAC,GAAA,CAAI,CAEhG,CAGA,IAAM,EAA4C,EAAE,AAGhD,EAAC,GAAU,GACb,EAAgB,IAAI,CAAC,GADK,AAKxB,EAAW,QAAQ,KAAO,IAE5B,EAAgB,IAAI,CAClB,EAAA,IAH2C,SAG9B,CAAC,QAAQ,CAAC,CACrB,WAAY,EACZ,SAAU,EACV,SAAU,OAAO,EAAa,QAAQ,GACxC,IAIF,EAAgB,IAAI,CAClB,AEjHN,SAAU,AAA4B,CAAkB,CAAE,EAAA,EAAA,gBAA4B,CDdpE,CAAA,MCiBP,OAAO,KAAK,CAAC,EAA0B,IAAI,CAAC,CAGzD,AAH0D,OAC1D,EAA0B,MAAM,CAAA,CAAG,WAAW,CAAE,EAAiB,KDfjD,CAAA,ICe2D,CAAE,CAAE,GAExE,CAF4E,CAAC,CAAC,CAE1E,EAAA,sBAAA,CAAA,CAAyB,KALvB,CAAC,QAAU,EAAS,KAAF,KAAY,EAAO,GAAF,SAAc,CAAI,CAAE,EAAF,kBAKT,EAC7D,CAAC,CF0GuC,KAKhC,IAAM,EAAY,EAAQ,OAAO,CAC9B,eAAe,CACd,EACA,EACA,EACA,EACA,EAAO,iBAAiB,EAEzB,QAAQ,CAAC,CACR,MAAO,EACP,MAAO,qBACP,aACA,EACA,OAAQ,EACR,aAAc,EAAA,gBAAgB,CAC9B,cAAe,EAAA,aAAa,CAAC,SAAS,CACtC,KAAM,EAAA,kBAAkB,AAC1B,GAGE,EAAgB,MAAM,CAAG,GAAG,AAC9B,EAAU,eAAe,CAAC,GAI5B,IAAM,EAAK,MAAM,EAAU,GAAG,GAM9B,OAHA,MAAM,EAAW,kBAAkB,CAAC,EAAI,aAExC,GAAa,GACN,CACL,UAAW,EACX,QAAS,EAAQ,QAAQ,GACzB,SAAU,EAAS,QAAQ,EAC7B,CACF,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,sBAAuB,GAGrC,IAAI,EAAW,GAAK,SAAW,wBAgB/B,OAdI,EAAS,QAAQ,CAAC,qBACpB,CAD0C,CAC/B,yDACA,wDACA,yCACA,0DACqB,CAArB,CACF,EAAS,QAAQ,CAAC,iCAC3B,CAD6D,CAClD,yEACF,EAAS,QAAQ,CAAC,kBAAkB,CAC7C,EAAW,4BAAA,EAGb,EAAS,GACT,GAAa,GACP,AAAI,MAAM,EAClB,CACF,EACA,CAAC,EAAW,EAAiB,EAAqB,EAAW,YAK7D,QACA,CACF,CACF,IDlMQ,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,MACrE,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,MACrE,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,CAAC,GA8CxD,EAAe,MAAO,IAG1B,GAFA,EAAE,cAAc,GAEZ,CAAC,EAAa,YAChB,IAIF,GAAI,CAAC,EAAiB,YACpB,EAAA,KAAK,CAAC,KAAK,CAAC,mCAId,GAAI,CAAC,AAzDc,MACnB,IAAM,EAAoC,CAAC,EAiB3C,GAdI,AAAC,IACH,EAAU,MAAM,CAAG,GADA,qBACA,EAIjB,AAAC,IACH,EAAU,MAAM,CAAG,GADA,qBACA,EAGjB,GAAkB,GAAkB,EAAe,IAAI,GAAK,EAAe,IAAI,EAAE,CACnF,EAAU,MAAM,CAAG,4BAAA,EAIjB,GAAgB,OAAS,QAAS,CACpC,IAAM,EAAgB,WAAW,IAC7B,CAAC,GAAW,MAAM,IAAkB,IAAiB,GAAG,CAC1D,EAAU,OAAO,CAAG,+BAAA,EAIlB,EAAe,IAAI,EAAI,aAAc,EAAe,IAAI,EAAE,AAExD,EADqB,WAAW,EAAe,CAC/B,GADmC,CAAC,QAAQ,IAE9D,EADoC,AAC1B,OAAO,CAAG,CAAC,iCAAiC,EAAE,EAAe,IAAI,CAAC,QAAQ,CAAC,EAAC,AAAC,CAG7F,CAEA,GAAI,GAAgB,OAAS,QAAS,CACpC,IAAM,EAAgB,WAAW,IAC7B,CAAC,GAAW,MAAM,IAAkB,IAAiB,GAAG,CAC1D,EAAU,OAAO,CAAG,+BAAA,CAExB,CAGA,OADA,EAAU,GACH,AAAkC,WAA3B,IAAI,CAAC,GAAW,MAAM,CACtC,IAeuB,YACnB,EAAA,KAAK,CAAC,KAAK,CAAC,8BAId,GAAI,CAEF,IAAM,EAAwC,AAAzB,UAAgB,IAAI,CAAa,IAAM,EACtD,EAAwC,QAAzB,EAAgB,IAAI,CAAa,IAAM,EAEtD,EAAY,EAAgB,QAAQ,EAAI,EACxC,EAAY,EAAgB,QAAQ,EAAI,EAExC,EAAe,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,EAAc,GAC3C,EAAe,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,EAAc,GAE3C,EAAS,MAAM,EAAY,CAC/B,WAAY,EAAgB,IAAI,cAChC,EACA,WAAY,EAAgB,IAAI,cAChC,oBACA,CACF,GAEA,EAAA,KAAK,CAAC,OAAO,CAAC,8BAA+B,CAC3C,YAAa,CAAC,aAAa,EAAE,EAAO,SAAS,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAChE,GAEA,EAAO,IAAI,CAAC,eACd,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAA,KAAK,CAAC,KAAK,CAAC,yBAA0B,CACpC,YAAa,EAAI,OAAO,EAAI,kBAC9B,EACF,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,uBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wDACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YAAY,yBAG/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACZ,MAAO,QAAkB,EACzB,SAAU,AAAC,IACT,EAAkB,GAEC,OAAO,CAAtB,EAAM,IAAI,EACZ,EAAW,KAEb,EAAU,CAAE,GAAG,CAAM,CAAE,OAAQ,EAAG,EACpC,EACA,MAAM,wBACN,YAAa,GAAgB,OAE9B,EAAO,MAAM,EACZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,MAAM,GAIxD,GAAgB,OAAS,SACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,SACL,KAAK,MACL,YAAY,sBACZ,MAAO,EACP,SAAU,AAAC,IACT,EAAW,EAAE,MAAM,CAAC,KAAK,EACzB,EAAU,CAAE,GAAG,CAAM,CAAE,QAAS,EAAG,EACrC,EACA,UAAW,EAAO,OAAO,CAAG,iBAAmB,KAEhD,EAAO,OAAO,EACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,OAAO,GAEzD,EAAe,IAAI,EAAI,aAAc,EAAe,IAAI,EACvD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+CAAqC,cACpC,EAAe,IAAI,CAAC,QAAQ,CAAC,IAAE,EAAe,IAAI,CAAC,MAAM,OAM5E,GAAgB,OAAS,OACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,mCAMnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wDACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YAAY,2BAG/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACZ,MAAO,QAAkB,EACzB,SAAU,AAAC,IACT,EAAkB,GAEC,OAAO,CAAtB,EAAM,IAAI,EACZ,EAAW,KAEb,EAAU,CAAE,GAAG,CAAM,CAAE,OAAQ,EAAG,EACpC,EACA,MAAM,0BACN,YAAa,GAAgB,OAE9B,EAAO,MAAM,EACZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,MAAM,GAIxD,GAAgB,OAAS,SACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,SACL,KAAK,MACL,YAAY,qBACZ,MAAO,EACP,SAAU,AAAC,IACT,EAAW,EAAE,MAAM,CAAC,KAAK,EACzB,EAAU,CAAE,GAAG,CAAM,CAAE,QAAS,EAAG,EACrC,EACA,UAAW,EAAO,OAAO,CAAG,iBAAmB,KAEhD,EAAO,OAAO,EACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,OAAO,MAK7D,GAAgB,OAAS,OACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,sCAOrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,GAAG,eACH,QAAS,EACT,SAAU,AAAC,GAAM,EAAqB,EAAE,MAAM,CAAC,OAAO,EACtD,UAAU,2CAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,QAAQ,eACR,UAAU,8CACX,gCAGD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,sEAOtD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qGACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,wBAAwB,kHAQrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,SACL,QAAS,IAAM,EAAO,IAAI,GAC1B,SAAU,WACX,WAGD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,GAAa,CAAC,YAC3C,GAAa,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,8BAChC,AAAC,EAEE,EACA,cACA,eAHA,8BAUlB","ignoreList":[2,3]}